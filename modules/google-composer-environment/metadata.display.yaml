# Copyright 2025 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: blueprints.cloud.google.com/v1alpha1
kind: BlueprintMetadata
metadata:
  name: terraform-google-cloud-composer-google-composer-environment-display
  annotations:
    config.kubernetes.io/local-config: "true"
spec:
  info:
    title: Google Composer Environment module
    source:
      repo: https://github.com/aakritic001/terraform-google-cloud-composer.git
      sourceType: git
      dir: /modules/google-composer-environment
  ui:
    input:
      variables:
        airflow_config_overrides:
          name: airflow_config_overrides
          title: Airflow Config Overrides
        composer_network_attachment:
          name: composer_network_attachment
          title: Composer Network Attachment
        enable_private_environment:
          name: enable_private_environment
          title: Enable Private Environment
        env_name:
          name: env_name
          title: Env Name
          regexValidation: ^(?:[a-z](?:[-a-z0-9]{0,61}[a-z0-9])?)$
          validation: Env Name must contain only lowercase letters, numbers and hyphens.
        env_variables:
          name: env_variables
          title: Env Variables
        environment_size:
          name: environment_size
          title: Environment Size
        image_version:
          name: image_version
          title: Image Version
          regexValidation: ^composer-(([0-9]+)(\.[0-9]+\.[0-9]+(-preview\.[0-9]+)?)?|latest)-airflow-(([0-9]+)((\.[0-9]+)(\.[0-9]+)?)?(-build\.[0-9]+)?)$
          validation: The image version must exactly match the format like this - composer-3-airflow-2.7.3.
        kms_key_name:
          name: kms_key_name
          title: Kms Key Name
        labels:
          name: labels
          title: Labels
        network:
          name: network
          title: Network
        project_id:
          name: project_id
          title: Project Id
        pypi_packages:
          name: pypi_packages
          title: Pypi Packages
        region:
          name: region
          title: Region
        service_account:
          name: service_account
          title: Service Account
        storage_bucket:
          name: storage_bucket
          title: Storage Bucket
        subnetwork:
          name: subnetwork
          title: Subnetwork
        workloads_config:
          name: workloads_config
          title: Workloads Config
    runtime:
      outputs:
        airflow_uri:
          visibility: VISIBILITY_ROOT
        composer_environment_id:
          visibility: VISIBILITY_ROOT
        dag_gcs_prefix:
          visibility: VISIBILITY_ROOT
        gke_cluster:
          visibility: VISIBILITY_ROOT
